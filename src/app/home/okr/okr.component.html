<div class="okr">
  <div class="okr__title">
    <div *ngFor="let okr of okrs" class="okr__objectives">
      <span>目標(Objective)</span>
      <form [formGroup]="objectives[okr.okrId]" class="okr__form-container">
        <ng-container
          *ngFor="
            let objective of objectives[okr.okrId].controls;
            index as objectiveArrayIndex
          "
        >
          <div
            [formGroupName]="objectiveArrayIndex"
            class="okr__objective-wrapper"
          >
            <input
              class="okr__objective"
              type="text"
              formControlName="objective"
              autocomplete="off"
              placeholder="記入例) 幸せになる"
            />
            <mat-error *ngIf="objective.get('objective').hasError('required')">
              必須入力です。
            </mat-error>
            <mat-error *ngIf="objective.get('objective').hasError('maxlength')">
              最大文字数は20文字です。
            </mat-error>
          </div>
        </ng-container>
      </form>
    </div>
  </div>
  <div *ngFor="let primary of primaries" class="okr__keyResults">
    <span class="okr__content">
      目標達成のための成果指標(Key Result)
    </span>
    <form
      class="okr__keyResult-container"
      [formGroup]="keyResults[primary.primaryId]"
    >
      <ng-container
        *ngFor="
          let KeyResult of keyResults[primary.primaryId].controls;
          index as KeyResultArrayIndex
        "
      >
        <div [formGroupName]="KeyResultArrayIndex">
          <input
            class="okr__keyResult"
            type="text"
            formControlName="key"
            autocomplete="off"
            placeholder="技術者として売れる"
          />
          <mat-error *ngIf="KeyResult.get('key').hasError('required')">
            必須入力です。
          </mat-error>
          <mat-error *ngIf="KeyResult.get('key').hasError('maxlength')">
            最大文字数は20文字です。
          </mat-error>
        </div>
      </ng-container>
    </form>
  </div>
</div>
