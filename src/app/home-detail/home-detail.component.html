<mat-card *ngIf="okr$ | async as okr">
  <h1 class="okr__title">{{ okr.title }}</h1>
  <h3 class="okr__start">
    期間: {{ okr.start.toDate() | date: 'yyyy年MM月dd日' }}〜{{
      okr.end.toDate() | date: 'yyyy年MM月dd日'
    }}
  </h3>
  <div *ngFor="let title of tableTitle; index as primaryIndex">
    <p>{{ title }}</p>
    <table class="table">
      <thead>
        <tr>
          <th class="header-left">Key</th>
          <th>Target</th>
          <th>current</th>
          <th>percentage</th>
          <th class="header-right">lastupdate</th>
        </tr>
      </thead>
      <tbody>
        <tr
          *ngFor="
            let row of tableData[primaryIndex].controls;
            index as rowIndex
          "
        >
          <ng-container
            [formGroup]="row"
            (ngSubmit)="createCellData(primaryIndex)"
          >
            <td class="body-left">
              <div class="open" (click)="openOkrDialog(primaryIndex)">
                <mat-icon>open_in_full</mat-icon>
                open
              </div>
              <input
                type="text"
                formControlName="key"
                required
                (oneclick)="updateCellData()"
              />
              <input type="submit" (click)="createCellData(primaryIndex)" />
            </td>
            <td><input type="text" formControlName="target" required /></td>
            <td><input type="text" formControlName="current" required /></td>
            <td><input type="text" formControlName="percentage" required /></td>
            <td class="body-right">
              <input type="text" formControlName="lastUpdated" required />
            </td>
            <div
              class="remove"
              type="button"
              (click)="remove(primaryIndex, rowIndex)"
            >
              remove
            </div>
          </ng-container>
        </tr>
      </tbody>
    </table>
    <div class="add-row" (click)="addRow(primaryIndex)">＋Add row</div>
  </div>
</mat-card>
