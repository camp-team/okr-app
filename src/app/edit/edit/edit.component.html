<div class="okr-project">
  <mat-horizontal-stepper #stepper class="stepper">
    <div class="first-step">
      <mat-step
        [stepControl]="firstFormGroup"
        errorMessage="Address is required."
      >
        <ng-template matStepLabel>目標を入力しましょう(手順 1/3)</ng-template>
        <h1 class="first-step__title">まず<br />目標を入力しましょう</h1>
        <form [formGroup]="form" class="first-step__form">
          <mat-form-field class="first-step__field">
            <mat-label class="first-step__lavel">目標を入力</mat-label>
            <input
              formControlName="title"
              type="text"
              matInput
              autocomplete="off"
              required
            />
            <mat-error *ngIf="titleControl.hasError('required')"
              >必須入力です</mat-error
            >
            <mat-error *ngIf="titleControl.hasError('maxlength')"
              >文字数は最大で40文字までです</mat-error
            >
          </mat-form-field>
        </form>
        <button
          mat-button
          matStepperNext
          [disabled]="titleControl.invalid"
          mat-raised-button
          color="primary"
          class="first-step__button"
        >
          次へ
        </button>
      </mat-step>
    </div>

    <div class="second-step">
      <mat-step
        [stepControl]="secondFormGroup"
        errorMessage="Address is required."
      >
        <form [formGroup]="form" class="second-step__form">
          <ng-template matStepLabel
            >主要な結果を入力しましょう(手順 3/3)</ng-template
          >
          <h1 class="second-step__title">
            次に<br />主要な結果を入力しましょう
          </h1>
          <h3 class="second-step__sub-title">*推奨2〜5つ</h3>
          <div formArrayName="primaries">
            <div *ngFor="let option of primaries.controls; let i = index">
              <mat-form-field class="second-step__field">
                <mat-label class="second-step__lavel">
                  primary{{ i + 1 }}
                </mat-label>
                <input
                  [formControlName]="i"
                  type="text"
                  matInput
                  autocomplete="off"
                />
                <mat-error *ngIf="option.hasError('maxlength')"
                  >文字数は最大で40文字までです</mat-error
                >
              </mat-form-field>

              <button
                class="second-step__remcontents"
                type="button"
                (click)="removeOption(i)"
                mat-icon-button
              >
                <mat-icon>remove</mat-icon>
              </button>
            </div>
          </div>

          <button
            class="second-step__addcontents"
            type="button"
            mat-raised-button
            (click)="addOptionForm()"
          >
            <mat-icon>add</mat-icon>
            Add contents
          </button>

          <div class="second-step__buttons">
            <button mat-button matStepperPrevious class="second-step__button">
              戻る
            </button>
            <button
              mat-button
              matStepperNext
              [disabled]="primariesControl.invalid"
              mat-raised-button
              color="primary"
              class="second-step__button"
            >
              次へ
            </button>
          </div>
        </form>
      </mat-step>
    </div>

    <div class="third-step">
      <mat-step
        [stepControl]="thirdFormGroup"
        errorMessage="Address is required."
      >
        <form [formGroup]="form" (ngSubmit)="submit()" class="third-step__form">
          <ng-template matStepLabel
            >開始日と終了日を入力しましょう(手順 2/3)</ng-template
          >
          <h1 class="third-step__title">
            最後に<br />開始日終了日を入力しましょう
          </h1>
          <h3 class="third-step__sub-title">
            *推奨1ヶ月〜四半期(設定、追跡、再評価)
          </h3>

          <mat-form-field class="third-step__field">
            <mat-label class="third-step__lavel">開始日</mat-label>
            <input
              formControlName="start"
              type="text"
              matInput
              autocomplete="off"
              required
              matInput
              [matDatepicker]="picker"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            <mat-error *ngIf="startControl.hasError('required')"
              >必須入力です</mat-error
            >
          </mat-form-field>

          <br />

          <mat-form-field class="third-step__field">
            <mat-label class="third-step__lavel">終了日</mat-label>
            <input
              formControlName="end"
              type="text"
              matInput
              autocomplete="off"
              required
              matInput
              [matDatepicker]="picker1"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker1"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
            <mat-error *ngIf="endControl.hasError('required')"
              >必須入力です</mat-error
            >
          </mat-form-field>

          <div class="third-step__buttons">
            <button mat-button matStepperPrevious class="third-step__button">
              戻る
            </button>
            <button
              [disabled]="
                startControl.invalid || endControl.invalid || form.invalid
              "
              mat-raised-button
              color="primary"
              class="third-step__button"
            >
              OKRを作成
            </button>
          </div>
        </form>
      </mat-step>
    </div>
  </mat-horizontal-stepper>
</div>
