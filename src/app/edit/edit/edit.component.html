<div class="edit">
  <mat-horizontal-stepper #stepper class="stepper">
    <div class="container">
      <div class="first-step">
        <mat-step
          [stepControl]="firstFormGroup"
          errorMessage="Address is required."
        >
          <div class="first-step__header">OKRの作成(手順 1/3)</div>
          <div class="first-step__main">
            <p class="first-step__title">
              <span>
                OKRを作成していきます
              </span>
              <span>
                まず、目標を入力しましょう！
              </span>
            </p>
            <form [formGroup]="form" class="first-step__form">
              <mat-form-field class="first-step__field">
                <mat-label class="first-step__lavel">目標を入力</mat-label>
                <input
                  formControlName="title"
                  type="text"
                  matInput
                  autocomplete="off"
                  required
                />
                <mat-error *ngIf="titleControl.hasError('required')"
                  >必須入力です</mat-error
                >
                <mat-error *ngIf="titleControl.hasError('maxlength')"
                  >文字数は最大で40文字までです</mat-error
                >
              </mat-form-field>
            </form>
            <button
              mat-button
              matStepperNext
              [disabled]="titleControl.invalid"
              mat-raised-button
              color="primary"
              class="first-step__button"
            >
              次へ
            </button>
            <div class="first-step__sidebar">
              <img
                class="first-step__img"
                src="assets/images/first-step-item.svg"
                alt=""
              />
            </div>
          </div>
        </mat-step>
      </div>
    </div>

    <div class="second-step">
      <mat-step
        [stepControl]="secondFormGroup"
        errorMessage="Address is required."
      >
        <div class="second-step__header">OKRの作成(手順 2/3)</div>
        <div class="second-step__main">
          <p class="second-step__title">
            <span>
              次に、目標を達成するために必要な
            </span>
            <span>
              具体的な目標を入力しましょう！
            </span>
          </p>
          <h3 class="second-step__sub-title">*推奨2〜5つ</h3>
          <form [formGroup]="form" class="second-step__form">
            <div formArrayName="primaries">
              <div *ngFor="let option of primaries.controls; let i = index">
                <mat-form-field class="second-step__field">
                  <mat-label class="second-step__lavel">
                    目標を入力 {{ i + 1 }}つ目
                  </mat-label>
                  <input
                    [formControlName]="i"
                    type="text"
                    matInput
                    autocomplete="off"
                  />
                  <mat-error *ngIf="option.hasError('maxlength')"
                    >文字数は最大で40文字までです</mat-error
                  >
                </mat-form-field>
                <button
                  class="second-step__remcontents"
                  type="button"
                  (click)="removeOption(i)"
                  mat-icon-button
                >
                  <mat-icon>remove</mat-icon>
                </button>
              </div>
            </div>
          </form>
          <button
            class="second-step__addcontents"
            type="button"
            mat-raised-button
            (click)="addOptionForm()"
          >
            <mat-icon>add</mat-icon>
            Add contents
          </button>
          <div class="second-step__action">
            <button mat-button matStepperPrevious class="second-step__button">
              戻る
            </button>
            <button
              mat-button
              matStepperNext
              [disabled]="primariesControl.invalid"
              mat-raised-button
              color="primary"
              class="second-step__next"
            >
              次へ
            </button>
          </div>
          <div class="second-step__sidebar">
            <img
              class="second-step__img"
              src="assets/images/second-step-item.svg"
              alt=""
            />
          </div>
        </div>
      </mat-step>
    </div>

    <div class="third-step">
      <mat-step
        [stepControl]="thirdFormGroup"
        errorMessage="Address is required."
      >
        <div class="third-step__header">OKRの作成(手順 3/3)</div>
        <div class="third-step__main">
          <p class="third-step__title">
            <span>
              最後になります。
            </span>
            <span>
              開始日と終了日を入力しましょう！
            </span>
          </p>
          <h3 class="third-step__sub-title">
            *推奨1ヶ月〜3ヶ月
          </h3>

          <form
            [formGroup]="form"
            (ngSubmit)="submit()"
            class="third-step__form"
          >
            <mat-form-field class="third-step__field">
              <mat-label class="third-step__lavel">開始日</mat-label>
              <input
                formControlName="start"
                type="text"
                matInput
                autocomplete="off"
                required
                matInput
                [matDatepicker]="picker"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              <mat-error *ngIf="startControl.hasError('required')"
                >必須入力です</mat-error
              >
            </mat-form-field>
            <br />
            <mat-form-field class="third-step__field">
              <mat-label class="third-step__lavel">終了日</mat-label>
              <input
                formControlName="end"
                type="text"
                matInput
                autocomplete="off"
                required
                matInput
                [matDatepicker]="picker1"
              />
              <mat-datepicker-toggle
                matSuffix
                [for]="picker1"
              ></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
              <mat-error *ngIf="endControl.hasError('required')"
                >必須入力です</mat-error
              >
            </mat-form-field>
          </form>
          <div class="third-step__buttons">
            <button mat-button matStepperPrevious class="third-step__button">
              戻る
            </button>
            <button
              [disabled]="
                startControl.invalid || endControl.invalid || form.invalid
              "
              mat-raised-button
              color="primary"
              class="third-step__next"
            >
              OKRを作成
            </button>
          </div>
          <div class="third-step__sidebar">
            <img
              class="third-step__img"
              src="assets/images/third-step-item.svg"
              alt=""
            />
          </div>
        </div>
      </mat-step>
    </div>
  </mat-horizontal-stepper>
</div>
